<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="A manual for Snap! TODO">

<title>Appendix B — Appendix B. APL features – Snap! Reference Manual</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../examples.html" rel="next">
<link href="../../content/13-appendix-a-snap-color-library/index.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="https://snap.berkeley.edu/" class="navbar-brand navbar-brand-logo">
    <img src="../../images/snap-logo.png" alt="TODO" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="https://snap.berkeley.edu/">
    <span class="navbar-title">Snap! Reference Manual</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://github.com/snap-cloud/snap-manual/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="../../snap-manual.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/13-appendix-a-snap-color-library/index.html">Appendices</a></li><li class="breadcrumb-item"><a href="../../content/14-appendix-b-apl-features/index.html"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Appendix B. APL features</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The Snap<em>!</em> Reference Manual</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/00-acknowledgements/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Acknowledgements</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/01-blocks-scripts-and-sprites/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Blocks, Scripts, and Sprites</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/02-saving-and-loading-projects-and/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Saving and Loading Projects and Media</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/03-building-a-block/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Building a Block</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/04-first-class-lists/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">First class lists</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/05-typed-inputs/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Typed Inputs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/06-procedures-as-data/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Procedures as Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/07-object-oriented-programming-with-sprites/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Object Oriented Programming with Sprites</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/08-oop-with-procedures/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">OOP with Procedures</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/09-the-outside-world/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">The Outside World</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/10-continuations/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Continuations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/11-metaprogramming/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Metaprogramming</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/12-user-interface-elements/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">User Interface Elements <span></span></span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../content/Chapter1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Blocks, Scripts, and Sprites</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Sprites and Parallelism</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Nesting Sprites: Anchors and Parts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Reporter Blocks and Expressions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Predicates and Conditional Evaluation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Global Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Script Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Transient variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">The pause button</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S15.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Breakpoints: the pause all block</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S16.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Visible stepping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S17.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Etcetera</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/C1-S18.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Libraries</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/Chapter2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Saving and Loading Projects and Media</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/13-appendix-a-snap-color-library/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Appendix A. Snap<em>!</em> color library</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/14-appendix-b-apl-features/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Appendix B. APL features</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../examples.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Example Test Title</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#boolean-values" id="toc-boolean-values" class="nav-link active" data-scroll-target="#boolean-values">Boolean values</a></li>
  <li><a href="#scalar-functions" id="toc-scalar-functions" class="nav-link" data-scroll-target="#scalar-functions">Scalar functions</a></li>
  <li><a href="#mixed-functions" id="toc-mixed-functions" class="nav-link" data-scroll-target="#mixed-functions">Mixed functions</a></li>
  <li><a href="#higher-order-functions" id="toc-higher-order-functions" class="nav-link" data-scroll-target="#higher-order-functions">Higher order functions</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/snap-cloud/snap-manual/edit/main/content/14-appendix-b-apl-features/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../content/13-appendix-a-snap-color-library/index.html">Appendices</a></li><li class="breadcrumb-item"><a href="../../content/14-appendix-b-apl-features/index.html"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Appendix B. APL features</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Appendix B — Appendix B. APL features</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The book <em>A Programming Language</em> <span></span> was published by mathematician Kenneth E. Iverson <span></span> in 1962. He wanted a formal language that would look like what mathematicians write on chalkboards. The then-unnamed language would later take its name from the first letters of the words in the book’s title. It was little-known until 1964, when a formal description of the just-announced IBM System/360 <span></span> in the <em>IBM Systems Journal</em> used APL <span></span> notation. (Around the same time, Iverson’s associate Adin Falkoff <span></span> gave a talk on APL to a New York Association for Computing Machinery chapter, with an excited 14-year-old Brian Harvey in the audience.) But it wasn’t until 1966 that the first public implementation of the language for the System/360 was published by IBM. (It was called “APL\360 <span></span>” because the normal slash character / represents the “reduce” operator in APL, while backslash is “expand.”)</p>
<p>The crucial idea behind APL is that mathematicians <span></span> think about collections of numbers, one-dimensional <em>vectors</em> <span></span> and two-dimensional <em>matrices</em> <span></span> <em>,</em> as valid objects in themselves, what computer scientists later learned to call “first class data <span></span> .” A mathematician who wants to add two vectors writes <strong><em>v</em><sub>1</sub></strong> + <strong><em>v</em><sub>2</sub></strong>, not “for i = 1 to length(v1), result[i]=v1[i]+v2[i].” Same for a programmer using APL.</p>
<p>There are three kinds of function in APL: scalar functions <span></span> , mixed functions <span></span>, and operators <span></span>. A <em>scalar function</em> is one whose natural domain is individual numbers or text characters. A <em>mixed function</em> is one whose domain includes arrays (vectors, matrices, or higher-dimensional collections). In Snap<em>!</em>, scalar functions are generally found in the green Operators palette, while mixed functions are in the red Lists palette. The third category, confusingly for Snap<em>!</em> users, is called <em>operators</em> in APL, but corresponds to what we call higher order functions <span></span> : functions whose domain includes functions.</p>
<p>Snap<em>!</em> hyperblocks <span></span> are scalar functions that behave like APL scalar functions: they can be called with arrays as inputs, and the underlying function is applied to each number in the arrays. (If the function is <em>monadic,</em> meaning that it takes one input, then there’s no complexity to this idea. Take the square root of an array, and you are taking the square root of each number in the array. If the function is <em>dyadic,</em> taking two inputs, then the two arrays must have the same shape. Snap<em>!</em> is more forgiving than APL; if the arrays don’t agree in number of dimensions, called the <em>rank</em> of the array, the lower-rank <span></span> array is matched repeatedly with subsets of the higher-rank one; if they don’t agree in length along one dimension, the result has the shorter length and some of the numbers in the longer-length array are ignored. An exception in both languages is that if one of the two inputs is a scalar, then it is matched with every number in the other array input.)</p>
<p>As explained in Section IV.F, this termwise extension <span></span> of scalar functions is the main APL-like feature built into Snap<em>!</em> itself. We also include an extension of the item block <span></span> to address multiple dimensions, an extension to the length block <span></span> with five list functions from APL, and a new primitive reshape block <span></span>. The APL library <span></span> extends the implementation of APL features to include a few missing scalar functions and several missing mixed functions and operators.</p>
<p>Programming in APL really is <em>very</em> different in style from programming in other languages, even Snap<em>!</em>. This appendix can’t hope to be a complete reference for APL, let alone a tutorial. If you’re interested, find one of those in a library or a (probably used) bookstore, read it, and <em>do the exercises.</em> Sorry to sound like a teacher, but the notation is sufficiently weird as to take a lot of practice before you start to think in APL.</p>
<p>A note on versions: There is a widely standardized APL2, several idiosyncratic extensions, and a successor language named J. The latter uses plain ASCII characters, unlike the ones with APL in their names, which use the mathematician’s character set, with Greek letters, typestyles (boldface and/or italics in books; underlined, upper case, or lower case in APL) as loose type declarations, and symbols not part of anyone’s alphabet, such as ⌊ for floor and ⌈ for ceiling. To use the original APL, you needed expensive special computer terminals. (This was before you could download fonts in software. Today the more unusual APL characters <span></span> are in Unicode <span></span> at U+2336 to U+2395.) The character set was probably the main reason APL didn’t take over the world. APL2 <span></span> has a lot to recommend it for Snap<em>!</em> users, mainly because it moves from the original APL idea that all arrays must be uniform in dimension, and the elements of arrays must be numbers or single text characters, to our idea that a list can be an element of another list, and that such elements don’t all have to have the same dimensions. Nevertheless, its mechanism for allowing both old-style APL arrays and more general “nested arrays” is complicated and hard for an APL beginner (probably all but two or three Snap<em>!</em> users) to understand. So we are starting with plain APL. If it turns out to be wildly popular, we may decide later to include APL2 features.</p>
<p>Here are some of the guiding ideas in the design of the APL library:</p>
<ul>
<li><p>Goal:&nbsp; Enable interested <strong>Snap<em>!</em></strong> users to learn the feel and style of APL programming. It’s really worth the effort. For example, we didn’t hyperize the = block because Snap<em>!</em> users expect it to give a single yes-or-no answer about the equality of two complete structures <span></span> , whatever their types and shapes. In APL, = is a scalar function; it compares two numbers or two characters. How could APL users live without the ability to ask if two <em>structures</em> are equal? Because in APL you can say <strong>∧</strong>/,a=b to get that answer. Reading from right to left, a=b reports an array of Booleans (represented in APL as 0 for False, 1 for True); the comma operator turns the shape of the array into a simple vector; and <strong>∧</strong>/ means “reduce with and”; “reduce” is our combine function. That six-character program is much less effort than the equivalent <img src="assets/image1263.png" class="img-fluid" alt="image1263.png"> <!--  style="width:4.45139in;height:0.52083in" / --> in Snap<em>!</em>. Note in passing that if you wanted to know <em>how many</em> corresponding elements of the two arrays are equal, you’d just use +/ instead of <strong>∧</strong>/. Note also that our APLish blocks are a little verbose, because they include up to three notations for the function: the usual Snap<em>!</em> name (e.g., flatten), the name APL programmers use when talking about it (ravel <span></span> ), and, in yellow type, the symbol used in actual APL code (,). We’re not consistent about it; <img src="assets/image1264.png" class="img-fluid" alt="image1264.png"> <!--  style="width:0.99306in;height:0.20833in" / --> seems self-documenting. And LCM (and) is different even though it has two names; it turns out that if you represent Boolean values as 0 and 1, then the algorithm to compute the least common multiple of two integers computes the and function if the two inputs happen to be Boolean. Including the APL symbols serves two purposes: the two or three Snap<em>!</em> users who’ve actually programmed in APL will be sure what function they’re using, but more importantly, the ones who are reading an APL tutorial while building programs in Snap<em>!</em> will find the block that matches the APL they’re reading.</p></li>
<li><p>Goal:&nbsp; Bring the best and most general APL ideas into “mainstream” <strong>Snap<em>!</em></strong> programming style. Media computation <span></span> , in particular, becomes much simpler when scalar functions can be applied to an entire picture or sound. Yes, map provides essentially the same capability, but the notation gets complicated if you want to map over columns rather than rows. Also, Snap<em>!</em> lists are fundamentally one-dimensional, but real data often have more dimensions. A Snap<em>!</em> programmer has to be thinking all the time about the convention that we represent a matrix as a list of rows, each of which is a list of individual cells. That is, row 23 of a spreadsheet <span></span> is item 23 of spreadsheet, but column 23 is map (item 23 of _) over spreadsheet. APL treats rows and columns more symmetrically.</p></li>
<li><p>Non-goal:&nbsp; Allow programs written originally in APL to run in <strong>Snap<em>!</em></strong> essentially unchanged.&nbsp; For example, in APL the atomic text unit is a single character, and strings of characters are lists. We treat a text string as scalar, and that isn’t going to change. Because APL programmers rarely use conditionals, instead computing functions involving arrays of Boolean values to achieve the same effect, the notation they do have for conditionals is primitive (in the sense of Paleolithic <span></span>, not in the sense of built in). We’re not changing ours.</p></li>
<li><p>Non-goal:&nbsp; Emulate the terse APL syntax. It’s too bad, in a way; as noted above, the terseness of expressing a computation affects APL programmers’ sense of what’s difficult and what isn’t. But you can’t say “terse” and “block language” in the same sentence. Our whole <em>raison d’être</em> is to make it possible to build a program without having to memorize the syntax or the names of functions, and to allow those names to be long enough to be self-documenting. And APL’s syntax has its own issues, of which the biggest is that it’s hard to use functions with more than two inputs; because most mathematical dyadic functions use infix notation (the function symbol between the two inputs), the notion of “left argument” and “right argument” is universal in APL documentation. The thing people most complain about, that there is no operator precedence (like the multiplication-before-addition rule in normal arithmetic notation), really doesn’t turn out to be a problem. Function grouping is strictly right to left, so 2×3+4 means two times seven, not six plus four. That takes some getting used to, but it really doesn’t take long if you immerse yourself in APL. The reason is that there are too many infix operators for people to memorize a precedence table. But in any case, block notation eliminates the problem, especially with Snap<em>!</em>’s zebra coloring. You can see and control the grouping by which block is inside which other block’s input slot. Another problem with APL’s syntax is that it bends over backward not to have reserved words, as opposed to Fortran, its main competition back then. So the dyadic <strong>○</strong> “circular functions” function uses the left argument to select a trig function. 1<strong>○</strong>x is sin(x), 2<strong>○</strong>x is cos(x), and so on. <strong>‾</strong>1<strong>○</strong>x is arcsin(x). What’s 0<strong>○</strong>x? Glad you asked; it’s<span class="math inline">\(\\\sqrt{1 - x^{2}}\)</span>.</p></li>
</ul>
<section id="boolean-values" class="level3">
<h3 class="anchored" data-anchor-id="boolean-values">Boolean values</h3>
<p>Snap<em>!</em> uses distinct Boolean values true and false that are different from other data types. APL uses 1 and 0, respectively. The APL style of programming depends heavily on doing arithmetic on Booleans, although their conditionals insist on only 0 or 1 in a Boolean input slot, not other numbers. Snap<em>!</em> <em>arithmetic</em> functions treat false as 0 and true as 1, so our APL library tries to report Snap<em>!</em> Boolean values from predicate functions.</p>
</section>
<section id="scalar-functions" class="level3">
<h3 class="anchored" data-anchor-id="scalar-functions">Scalar functions</h3>
<p><img src="assets/image1265.png" class="img-fluid" alt="image1265.png"> <!--  style="width:5.73333in;height:1.10667in" / --></p>
<p>These are the scalar functions <span></span> in the APL library. Most of them are straightforward to figure out. The scalar = block <span></span> provides an APL-style version of = (and other exceptions) as a hyperblock that extends termwise to arrays. Join, the only non-predicate non-hyper scalar primitive, has its own scalar join block <span></span> . 7 deal <span></span> 52 reports a random vector of seven numbers from 1 to 52 with no repetitions, as in dealing a hand of cards. Signum <span></span> of a number reports 1 if the number is positive, 0 if it’s zero, or -1 if it’s negative. Roll <span></span> 6 reports a random roll of a six-sided die. To roll 8 dice, use <img src="assets/image1266.png" class="img-fluid" alt="image1266.png"> <!--  style="width:2.56667in;height:0.21667in" alt="Macintosh HD:Users:bh:Desktop:roll-8-dice.png" / --> , which would look much more pleasant as ?8⍴6. But perhaps our version is more instantly readable by someone who didn’t grow up with APL. All the library functions have help messages available.</p>
</section>
<section id="mixed-functions" class="level3">
<h3 class="anchored" data-anchor-id="mixed-functions">Mixed functions</h3>
<p>Mixed functions include lists in their natural domain or range. That is, one or both of its inputs <em>must</em> be a list, or it always reports a list. Sometimes both inputs are naturally lists; sometimes one input of a dyadic mixed function is naturally a scalar, and the function treats a list in that input slot as an implicit map, as for scalar functions. This means you have to learn the rule for each mixed function <span></span> individually.</p>
<p><img src="assets/image1268.png" class="img-fluid" alt="image1268.png"> <!--  style="width:1.06667in;height:0.18333in" alt="Macintosh HD:Users:bh:Desktop:shape-of.png" / --> The shape of function <span></span> takes any input and reports a vector of the maximum size of the structure along each dimension. For a vector, it returns a list of length 1 containing the length of the input. For a matrix, it returns a two-item list of the number of rows and number of columns of the input. And so on for higher dimensions. If the input isn’t a list at all, then it has zero dimensions, and shape of reports an empty vector. Equivalent to the dimensions of primitive, as of 6.6.</p>
<p><img src="assets/image1267.png" class="img-fluid" alt="image1267.png"> <!--  style="width:4.275in;height:1.1in" alt="Macintosh HD:Users:bh:Desktop:shape-example.png" / --></p>
<p><img src="assets/image1269.png" class="img-fluid" alt="image1269.png"> <!--  style="width:1.04167in;height:0.18333in" alt="Macintosh HD:Users:bh:Desktop:rank.png" / --> Rank of <span></span> isn’t an actual APL primitive, but the composition ⍴⍴ (shape of shape of a structure), which reports the number of dimensions of the structure (the length of its shape vector), is too useful to omit. (It’s very easy to type the same character twice on the APL keyboard, but less easy to drag blocks together.) Equivalent to the rank of primitive, as of 6.6.</p>
<p><img src="assets/image1270.png" class="img-fluid" alt="image1270.png"> <!--  style="width:2.03333in;height:0.18333in" alt="Macintosh HD:Users:bh:Desktop:reshape.png" / --></p>
<p>Reshape <span></span> takes a shape vector (such as shape might report) on the left and any structure on the right. It ignores the shape of the right input, stringing the atomic elements into a vector in row-major order (that is, all of the first row left to right, then all of the second row, etc.). (The primitive reshape takes the inputs in the other order.) It then reports an array with the shape specified by the first input containing the items of the second:</p>
<p><img src="assets/image1271.png" class="img-fluid" alt="image1271.png"> <!--  style="width:7.325in;height:0.83333in" alt="Macintosh HD:Users:bh:Desktop:reshape-ex.png" / --></p>
<p>If the right input has more atomic elements than are required by the left-input shape vector, the excess are ignored without reporting an error. If the right input has too <em>few</em> atomic elements, the process of filling the reported array starts again from the first element. This is most useful in the specific case of an atomic right input, which produces an array of any desired shape all of whose atomic elements are equal. But other cases are sometimes useful too:</p>
<p><img src="assets/image1272.png" class="img-fluid" alt="image1272.png"> <!--  style="width:6.575in;height:1.04167in" alt="Macintosh HD:Users:bh:Desktop:identity-matrix.png" / --></p>
<p><img src="assets/image1273.png" class="img-fluid" alt="image1273.png"> <!--  style="width:6.575in;height:1.04167in" alt="Macintosh HD:Users:bh:Desktop:identity-matrix.png" / --></p>
<p><img src="assets/image1275.png" class="img-fluid" alt="image1275.png"> <!--  style="width:1.43333in;height:0.18333in" alt="Macintosh HD:Users:bh:Desktop:ravel.png" / --> Flatten <span></span> takes an arbitrary structure as input and reports a vector of its atomic elements in row-major order. Lispians call this flattening the structure, but APLers call it “ravel” because of the metaphor of pulling on a ball of yarn, so what they really mean is “unravel.” (But the snarky sound of that is uncalled-for, because a more advanced version that we might implement someday is more like raveling.) One APL idiom is to apply this to a scalar in order to turn it into a one-element vector, but we can’t use it that way because you can’t type a scalar value into the List-type input slot. Equivalent to the primitive flatten of block.</p>
<p><img src="assets/image1276.png" class="img-fluid" alt="image1276.png"> <!--  style="width:1.43333in;height:0.18333in" alt="Macintosh HD:Users:bh:Desktop:ravel.png" / --></p>
<p>Catenate <span></span> is like our primitive append, with two differences: First, if either input is a scalar, it is treated like a one-item vector. Second, if the two inputs are of different rank, the catenate function is recursively mapped over the higher-rank input:</p>
<p><img src="assets/image1280.png" class="img-fluid" alt="image1280.png"> <!--  style="width:7.20417in;height:0.58333in" alt="Macintosh HD:Users:bh:Desktop:catenate-ex.png" / --></p>
<p>Catenate vertically <span></span> is similar, but it adds new rows instead of adding new columns.</p>
<p><img src="assets/image1281.png" class="img-fluid" alt="image1281.png"> <!--  style="width:0.53333in;height:0.25in" alt="Macintosh HD:Users:bh:Desktop:iota.png" / --></p>
<p>Integers <span></span> (I think that’s what it stands for, although APLers just say “iota”) takes a positive integer input and reports a vector of the integers from 1 to the input. This is an example of a function classed as “mixed” not because of its domain but because of its range. The difference between this block and the primitive numbers from block is in its treatment of lists as inputs. Numbers from is a hyperblock, applying itself to each item of its input list:</p>
<p><img src="assets/image1282.png" class="img-fluid" alt="image1282.png"> <!--  style="width:6.34167in;height:1.04167in" alt="Macintosh HD:Users:bh:Desktop:numbers-ex.png" / --></p>
<p>Iota <span></span> has a special meaning for list inputs: The input must be a shape vector; the result is an array with that shape in which each item is a list of the indices of the cell along each dimension. A picture is worth 10<sup>3</sup> words, but Snap<em>!</em> isn’t so good at displaying arrays with more than two dimensions, so here we reduce each cell’s index list to a string:</p>
<p><img src="assets/image1283.png" class="img-fluid" alt="image1283.png"> <!--  style="width:6.025in;height:0.83333in" alt="Macintosh HD:Users:bh:Desktop:iota-list-ex.png" / --></p>
<p><img src="assets/image1284.png" class="img-fluid" alt="image1284.png"> <!--  style="width:1.475in;height:0.25in" alt="Macintosh HD:Users:bh:Desktop:dyadic-iota.png" / --> Dyadic iota is like the index of <span></span> primitive except for its handling of multi-dimensional arrays. It looks only for atomic elements, so a vector in the second input doesn’t mean to search for that vector as a row of a matrix, which is what it means to index of, but rather to look separately for each item of the vector, and report a list of the locations of each item. If the first input is a multi-dimensional array, then the location of an item is a vector with the indices along each row.</p>
<p><img src="assets/image1285.png" class="img-fluid" alt="image1285.png"> <!--  style="width:5.95in;height:1.1in" alt="Macintosh HD:Users:bh:Desktop:dy-iota-ex.png" / --></p>
<p>In this example, the 4 is in the second row, second column. (This is actually an extension of APL iota, which is more like a hyperized index of.) Generalizing, if the rank of the second input is less than the rank of the first input by two or more, then iota looks for the entire second input in the first input. The reported position is a vector whose length is equal to the difference between the two ranks. If the rank of the second input is one less than the rank of the first, the reported value is a scalar, the index of the entire second input in the first.</p>
<p><img src="assets/image1286.png" class="img-fluid" alt="image1286.png"> <!--  style="width:5.84167in;height:0.35in" alt="Macintosh HD:Users:bh:Desktop:dy-iota-ex2.png" / --></p>
<p>However, if the two ranks are equal, then the block is hyperized; each item of the second input is located in the first input. As the next example shows, only the first instance of each item is found (e.g., the 1 in position 2, not the 1 in position 4); if an item does not occur in the left input, what is reported is one more than the length of the left input (here, 8).</p>
<p><img src="assets/image1287.png" class="img-fluid" alt="image1287.png"> <!--  style="width:5.38333in;height:1.1in" alt="Macintosh HD:Users:bh:Desktop:dy-iota-ex3.png" / --></p>
<p>Why the strange design decision to report length+1 when something isn’t found, instead of a more obvious flag value such as 0 or false? Here’s why:</p>
<p><img src="assets/image1288.png" class="img-fluid" alt="image1288.png"> <!--  style="width:5.38333in;height:1.1in" alt="Macintosh HD:Users:bh:Desktop:dy-iota-ex3.png" / --></p>
<p>Note that code has 27 items, not 26. The asterisk at the end is the ciphertext is the translation of all non-alphabet characters (spaces and the apostrophe in “doesn’t”). This is a silly example, because it makes up a random cipher every time it’s called, and it doesn’t report the cipher, so the recipient can’t decipher the message. And you wouldn’t want to make the spaces in the message so obvious. But despite being silly, the example shows the benefit of reporting length+1 as the position of items not found.</p>
<p><img src="assets/image1292.png" class="img-fluid" alt="image1292.png"> <!--  style="width:2.175in;height:0.225in" alt="Macintosh HD:Users:bh:Desktop:contained.png" / --></p>
<p>The contained in block <span></span> is like a hyperized contains with the input order reversed. It reports an array of Booleans the same shape as the left input. The shape of the right input doesn’t matter; the block looks only for atomic elements.</p>
<p><img src="assets/image1293.png" class="img-fluid" alt="image1293.png"> <!--  style="width:7.48542in;height:0.65972in" alt="Macintosh HD:Users:bh:Desktop:contained-ex.png" / --></p>
<p><img src="assets/image1294.png" class="img-fluid" alt="image1294.png"> <!--  style="width:7.48542in;height:0.65972in" alt="Macintosh HD:Users:bh:Desktop:contained-ex.png" / -->The blocks grade up <span></span> and grade down <span></span> are used for sorting data. Given an array as input, it reports a vector of the indices in which the items (the rows, if a matrix) should be rearranged in order to be sorted. This will be clearer with an example:</p>
<p><img src="assets/image1295.png" class="img-fluid" alt="image1295.png"> <!--  style="width:7.48542in;height:0.65972in" alt="Macintosh HD:Users:bh:Desktop:contained-ex.png" / --></p>
<p>The result from grade up tells us that item 3 of <strong>foo</strong> comes first in sorted order, then item 4, then 2, then 1. When we actually select items of <strong>foo</strong> based on this ordering, we get the desired sorted version. The result reported by grade down is almost the reverse of that from grade up, but not quite, if there are equal items in the list. (The sort is stable, so if there are equal items, then whichever comes first in the input list will also be first in the sorted list.)</p>
<p>Why this two-step process? Why not just have a sort primitive in APL? One answer is that in a database application you might want to sort one array based on the order of another array:</p>
<p><img src="assets/image1304.png" class="img-fluid" alt="image1304.png"> <!--  style="width:5.48333in;height:2.2in" alt="Macintosh HD:Users:bh:Desktop:database.png" / --></p>
<p>This is the list of employees of a small company. (Taken from <em>Structure and Interpretation of Computer Programs</em> by Abelson and Sussman. Creative Commons licensed.) Each of the smaller lists contains a person’s name, job title, and yearly salary. We would like to sort the employees’ names in big-to-small order of salary. First we extract column 3 of the database, the salaries:</p>
<p><img src="assets/image1305.png" class="img-fluid" alt="image1305.png"> <!--  style="width:3.55903in;height:1.97639in" / --></p>
<p>Then we use grade down to get the reordering indices:</p>
<p><img src="assets/image1307.png" class="img-fluid" alt="image1307.png"> <!--  style="width:4.97847in;height:2.23333in" / --></p>
<p>At this point we <em>could</em> use the index vector to sort the salaries:</p>
<p><img src="assets/image1306.png" class="img-fluid" alt="image1306.png"> <!--  style="width:5.33333in;height:2.37333in" / --></p>
<p>But what we actually want is a list of <em>names,</em> sorted by salary:</p>
<p><img src="assets/image1308.png" class="img-fluid" alt="image1308.png"> <!--  style="width:5.59333in;height:2.3in" / --></p>
<p>By taking the index vector from grade down of column 3 and telling item to apply it to column 1, we get what we set out to find. As usual the code is more elegant in APL: database[⍒database[;3];1].</p>
<p>In case you’ve forgotten, <img src="assets/image1309.png" class="img-fluid" alt="image1309.png"> <!--  style="width:2.30833in;height:0.275in" alt="Macintosh HD:Users:bh:Desktop:row-select.png" / --> or <img src="assets/image1310.png" class="img-fluid" alt="image1310.png"> <!--  style="width:2.91667in;height:0.325in" alt="Macintosh HD:Users:bh:Desktop:column-select.png" / --> would select the third <em>row</em> of the database; we need the list 3 in the second input slot of the outer list to select by columns rather than by rows.</p>
<p><img src="assets/image1311.png" class="img-fluid" alt="image1311.png"> <!--  style="width:2.91667in;height:0.325in" alt="Macintosh HD:Users:bh:Desktop:column-select.png" / --></p>
<p>Select (if take <span></span> ) or select all but (if drop <span></span> ) the first (if <em>n</em>&gt;0) or last (if <em>n</em>&lt;0) |<em>n</em>| items from a vector, or rows from a matrix. Alternatively, if the left input is a two-item vector, select rows with the first item and columns with the second.</p>
<p><img src="assets/image1312.png" class="img-fluid" alt="image1312.png"> <!--  style="width:2.91667in;height:0.325in" alt="Macintosh HD:Users:bh:Desktop:column-select.png" / --></p>
<p>The compress block <span></span> selects a subset of its right input based on the Boolean values in its left input, which must be a vector of Booleans whose length equals the length of the array (the number of rows, for a matrix) in the right input. The block reports an array of the same rank as the right input, but containing only those rows whose corresponding Boolean value is true. The columns version <strong>⌿</strong> is the same but selecting columns rather than selecting rows.</p>
<p>A word about the possibly confusing names of these blocks: There are two ways to think about what they do. Take the standard / version, to avoid talking about both at once. One way to think about it is that it selects some of the rows. The other way is that it shortens the columns. For Lispians, which includes you since you’ve learned about keep, the natural way to think about / is that it keeps some of the rows. Since we represent a matrix as a list of rows, that also fits with how this function is implemented. (Read the code; you’ll find a keep inside.) But APL people think about it the other way, so when you read APL documentation, / is described as operating on the last dimension (the columns), while <strong>⌿</strong> is described as operating on rows. We were more than a month into this project before I understood all this. You get long block names so it won’t take you a month!</p>
<p><img src="assets/image1320.png" class="img-fluid" alt="image1320.png"> <!--  style="width:2.99444in;height:0.23333in" / --> <img src="assets/image1319.png" class="img-fluid" alt="image1319.png"> <!--  style="width:3.175in;height:0.18333in" / --><br>
<img src="assets/image1321.png" class="img-fluid" alt="image1321.png"> <!--  style="width:1.11181in;height:0.23333in" alt="Macintosh HD:Users:bh:Desktop:transpose.png" / --> Don’t confuse this block with the reduce block <span></span>, whose APL symbol is also a slash. In that block, what comes to the left of the slash is a dyadic combining function; it’s the APL equivalent of combine. This block is more nearly equivalent to keep. But keep takes a predicate function as input, and calls the function for each item of the second input. With compress, the predicate function, if any, has already been called on all the items of the right input in parallel, resulting in a vector of Boolean values. This is a typical APL move; since hyperblocks are equivalent to an implicit map, it’s easy to make the vector of Booleans, because any scalar function, including predicates, can be applied to a list instead of to a scalar. The reason both blocks use the / character is that both of them reduce the size of the input array, although in different ways.</p>
<p>The reverse row order <span></span>, reverse column order <span></span>, and transpose blocks <span></span> form a group: the group of reflections of a matrix. The APL symbols are all a circle with a line through it; the lines are the different axes of reflection. So the reverse row order block reverses which row is where; the reverse column order block reverses which column is where; and the transpose block turns rows into columns and vice versa:</p>
<p><img src="assets/image1322.png" class="img-fluid" alt="image1322.png"> <!--  style="width:1.11181in;height:0.23333in" alt="Macintosh HD:Users:bh:Desktop:transpose.png" / --></p>
<p>Except for reverse row order, these work only on full arrays, not ragged-right lists of lists, because the result of the other two would be an array in which some rows had “holes”: items 1 and 3 exist, but not item 2. We don’t have a representation for that. (In APL, all arrays are full, so it’s even more restrictive.)</p>
</section>
<section id="higher-order-functions" class="level3">
<h3 class="anchored" data-anchor-id="higher-order-functions">Higher order functions</h3>
<p>The final category of function is operators <span></span> —APL higher order functions <span></span>. APL has no explicit map function, because the hyperblock capability serves much the same need. But APL2 did add an explicit map, which we might get around to adding to the library next time around. Its symbol is <strong>¨</strong> (diaeresis or umlaut).</p>
<p>The APL equivalent of keep is compress, but it’s not a higher order function. You create a vector of Booleans (0s and 1s, in APL) before applying the function to the array you want to compress.</p>
<p>But APL does have a higher order version of combine:</p>
<p><img src="assets/image1323.png" class="img-fluid" alt="image1323.png"> <!--  style="width:1.11181in;height:0.23333in" alt="Macintosh HD:Users:bh:Desktop:transpose.png" / --></p>
<p>The reduce block <span></span> works just like combine, taking a dyadic function and a list. The / version translates each row to a single value; the <strong>⌿</strong> version translates each column to a single value. That’s the only way to think about it from the perspective of combining individual elements: you are adding up, or whatever the function is, the numbers in a single row (/) or in a single column (<strong>⌿</strong>). But APLers think of a matrix as made up of vectors, either row vectors or column vectors. And if you think of what these blocks do as adding vectors, rather than adding individual numbers, it’s clear that in</p>
<p><img src="assets/image1332.png" class="img-fluid" alt="image1332.png"> <!--  style="width:6.68333in;height:1.04167in" alt="Macintosh HD:Users:bh:Desktop:matrix.png" / --></p>
<p><img src="assets/image1333.png" class="img-fluid" alt="image1333.png"> <!--  style="width:5.83333in;height:1.1in" alt="Macintosh HD:Users:bh:Desktop:add-matrix.png" / --></p>
<p>the <em>vector</em> (10, 26, 42) is the sum of <em>column vectors</em> (1, 5, 9)+(2, 6, 10)+(3, 7, 11)+(4, 8, 12). In pre-6.0 Snap<em>!</em>, we’d get the same result this way:</p>
<p><img src="assets/image1334.png" class="img-fluid" alt="image1334.png"> <!--  style="width:4.80833in;height:1.1in" alt="Macintosh HD:Users:bh:Desktop:non-apl-combine.png" / --></p>
<p>mapping over the <em>rows</em> of the matrix, applying combine to each row. Combining rows, reducing column vectors.</p>
<p><img src="assets/image1336.png" class="img-fluid" alt="image1336.png"> <!--  style="width:2.16667in;height:0.24167in" alt="Macintosh HD:Users:bh:Desktop:outer.png" / --> The outer product block <span></span> takes two arrays (vectors, typically) and a dyadic scalar function as inputs. It reports an array whose rank is the sum of the ranks of the inputs (so, typically a matrix), in which each item is the result of applying the function to an atomic element of each array. The third element of the second row of the result is the value reported by the function with the second element of the left input and the third element of the right input. (The APL symbol ◦. is pronounced “jot dot.”) The way to think about this block is “multiplication table <span></span>” from elementary school:</p>
<p><img src="assets/image1335.png" class="img-fluid" alt="image1335.png"> <!--  style="width:7.24in;height:1.52in" alt="Macintosh HD:Users:bh:Desktop:outer-ex.png" / --></p>
<p><img src="assets/image1337.png" class="img-fluid" alt="image1337.png"> <!--  style="width:2.61667in;height:0.24167in" alt="Macintosh HD:Users:bh:Desktop:inner.png" / --> The inner product block <span></span> takes two matrices and two operations as input. The number of columns in the left matrix must equal the number of rows in the right matrix. When the two operations are + and ×, this is the matrix multiplication <span></span> familiar to mathematicians:</p>
<p><img src="assets/image1338.png" class="img-fluid" alt="image1338.png"> <!--  style="width:7.33861in;height:1.00694in" alt="Macintosh HD:Users:bh:Desktop:inner-ex.png" / --></p>
<p>But other operations can be used. One common inner product is ∨.∧ (“or dot and”) applied to Boolean matrices, to find rows and columns that have corresponding items in common.</p>
<p><img src="assets/image1339.png" class="img-fluid" alt="image1339.png"> <!--  style="width:0.95833in;height:0.18333in" alt="Macintosh HD:Users:bh:Desktop:printable.png" / --> The printable block <span></span> isn’t an APL function; it’s an aid to exploring APL-in-Snap<em>!</em>. It transforms arrays to a compact representation that still makes the structure clear:</p>
<p><img src="assets/image1340.png" class="img-fluid" alt="image1340.png"> <!--  style="width:5.99792in;height:0.33333in" alt="Macintosh HD:Users:bh:Desktop:printable-ex.png" / --></p>
<p>Experts will recognize this as the Lisp representation of list structure,</p>
<p>Index</p>
<p>! block · 32</p>
<p>.csv file · 134</p>
<p>.json file · 134</p>
<p>.txt file · 134</p>
<p># variable · 25</p>
<p>#1 · 69</p>
<p>+ block · 22</p>
<p>× block · 22</p>
<p>≠ block · 20</p>
<p>≤ block · 20</p>
<p>≥ block · 20</p>
<p>⚡ (lightning bolt) · 123</p>
<p>A</p>
<p>a new clone of block · 77</p>
<p><em>A Programming Language</em> · 148</p>
<p>Abelson, Hal · 4</p>
<p>About option · 107</p>
<p>add comment option · 124, 125</p>
<p>Add scene… option · 111</p>
<p>additive mixing · 144</p>
<p>Advanced Placement Computer Science Principles · 110</p>
<p>AGPL · 107</p>
<p>all but first blocks · 27</p>
<p>all but first of block · 49</p>
<p>all but first of stream block · 26</p>
<p>all but last blocks · 27</p>
<p>all of block · 28</p>
<p>Alonzo · 9, 55</p>
<p>anchor · 10</p>
<p>anchor (in my block) · 78</p>
<p>animate block · 33</p>
<p>animation · 12</p>
<p>animation library · 33</p>
<p>anonymous list · 46</p>
<p>Any (unevaluated) type · 72</p>
<p>any of block · 28</p>
<p>Any type · 60</p>
<p>APL · 4, 58, 148</p>
<p>APL character set · 149</p>
<p>APL library · 35, 148</p>
<p>APL2 · 149</p>
<p>APL\360 · 148</p>
<p>Arduino · 92</p>
<p>arithmetic · 11</p>
<p>array, dynamic · 49</p>
<p>arrow, upward-pointing · 63</p>
<p>arrowheads · 46, 63, 69</p>
<p>ask and wait block · 24</p>
<p>ask block · 86</p>
<p>assoc block · 25</p>
<p>association list · 88</p>
<p>associative function · 51</p>
<p>at block · 19</p>
<p>atan2 block · 20</p>
<p>atomic data · 57</p>
<p>attribute · 76</p>
<p>attributes, list of · 78</p>
<p>audio comp library · 34</p>
<p>B</p>
<p>background blocks · 19</p>
<p>Backgrounds… option · 112</p>
<p>backspace key (keyboard editor) · 131</p>
<p>Ball, Michael · 4</p>
<p>bar chart block · 28</p>
<p>bar charts library · 28</p>
<p>base case · 44</p>
<p>BIGNUMS block · 32</p>
<p>binary tree · 47</p>
<p>bitmap · 79, 112</p>
<p>bitwise library · 36</p>
<p>bjc.edc.org · 137</p>
<p>Black Hole problem · 139</p>
<p>block · 6; command · 6; C-shaped · 7; hat · 6; predicate · 12; reporter · 10; sprite-local · 75</p>
<p>Block Editor · 41, 42, 59</p>
<p>block label · 102</p>
<p>block library · 45, 110</p>
<p>block picture option · 124</p>
<p>block shapes · 40, 60</p>
<p>block variable · 43</p>
<p>block with no name · 32</p>
<p>blockify option · 134</p>
<p>blocks, color of · 40</p>
<p>Boole, George · 12</p>
<p>Boolean · 12</p>
<p>Boolean (unevaluated) type · 72</p>
<p>Boolean constant · 12</p>
<p>box of ten crayons · 139</p>
<p>box of twenty crayons · 139</p>
<p>break command · 99</p>
<p>breakpoint · 17, 118</p>
<p>Briggs, David · 145</p>
<p>broadcast and wait block · 9, 125</p>
<p>broadcast block · 21, 23, 73, 125</p>
<p>brown dot · 9</p>
<p>Build Your Own Blocks · 40</p>
<p>Burns, Scott · 145</p>
<p>button: pause · 17; recover · 39; visible stepping · 18</p>
<p>C</p>
<p>C programming language · 68</p>
<p>call block · 65, 68</p>
<p>call w/continuation block · 97</p>
<p>camera icon · 126</p>
<p>Cancel button · 129</p>
<p>carriage return character · 20</p>
<p>cascade blocks · 26</p>
<p>case-independent comparisons block · 33</p>
<p>cases block · 28</p>
<p>catch block · 26, 99</p>
<p>catch errors library · 31</p>
<p>catenate block · 152</p>
<p>catenate vertically block · 152</p>
<p>center of the stage · 22</p>
<p>center x (in my block) · 78</p>
<p>center y (in my block) · 78</p>
<p>Chandra, Kartik · 4</p>
<p>change background block · 22</p>
<p>Change password… option · 113</p>
<p>change pen block · 24, 29, 117, 140</p>
<p>child class · 87</p>
<p>children (in my block) · 78</p>
<p>Church, Alonzo · 9</p>
<p>class · 85</p>
<p>class/instance · 76</p>
<p>clean up option · 125</p>
<p>clear button · 129</p>
<p>clicking on a script · 122</p>
<p>Clicking sound option · 116</p>
<p>clone: permanent · 74; temporary · 74</p>
<p>clone of block · 89</p>
<p>clones (in my block) · 78</p>
<p>cloud (startup option) · 136</p>
<p>Cloud button · 37, 108</p>
<p>cloud icon · 113</p>
<p>cloud storage · 37</p>
<p>CMY · 138</p>
<p>CMYK · 138</p>
<p>codification support option · 117</p>
<p>color at weight block · 145</p>
<p>color block · 140</p>
<p>color chart · 147</p>
<p>color from block · 29, 140</p>
<p>color nerds · 145</p>
<p>color numbers · 29, 138, 139</p>
<p>color of blocks · 40</p>
<p>color palette · 128</p>
<p>color picker · 143</p>
<p>color scales · 141</p>
<p>color space · 138</p>
<p>color theory · 138</p>
<p>Colors and Crayons library · 138</p>
<p>colors library · 29</p>
<p>columns of block · 57</p>
<p>combine block · 50</p>
<p>combine block (APL) · 157</p>
<p>command block · 6</p>
<p>comment box · 125</p>
<p>compile menu option · 123</p>
<p>compose block · 26</p>
<p>compress block · 156</p>
<p>Computer Science Principles · 110</p>
<p>cond in Lisp · 28</p>
<p>conditional library: multiple-branch · 28</p>
<p>constant functions · 71</p>
<p>constructors · 47</p>
<p>contained in block · 153</p>
<p>context menu · 119</p>
<p>context menu for the palette background · 120</p>
<p>context menus for palette blocks · 119</p>
<p>continuation · 93</p>
<p>continuation passing style · 94</p>
<p>Control palette · 7</p>
<p>controls in the Costumes tab · 126</p>
<p>controls in the Sounds tab · 130</p>
<p>controls on the stage · 132</p>
<p>control-shift-enter (keyboard editor) · 132</p>
<p>copy of a list · 50</p>
<p>CORS · 92</p>
<p>cors proxies · 92</p>
<p>costume · 6, 8</p>
<p>costume from text block · 31</p>
<p>costume with background block · 31</p>
<p>costumes (in my block) · 78</p>
<p>Costumes tab · 9, 126</p>
<p>costumes, first class · 79</p>
<p>Costumes… option · 112</p>
<p>counter class · 85</p>
<p>CPS · 96</p>
<p>crayon library · 31</p>
<p>crayons · 29, 138, 139</p>
<p>create var block · 32</p>
<p>create variables library · 32</p>
<p>Cross-Origin Resource Sharing · 92</p>
<p>crossproduct · 70</p>
<p>cs10.org · 137</p>
<p>C-shaped block · 7, 67</p>
<p>C-shaped slot · 72</p>
<p>CSV (comma-separated values) · 54</p>
<p>CSV format · 20</p>
<p>csv of block · 57</p>
<p>current block · 92</p>
<p>current date or time · 92</p>
<p>current location block · 34</p>
<p>current sprite · 122</p>
<p>custom block in a script · 124</p>
<p>custom? of block block · 102</p>
<p>cyan · 142</p>
<p>D</p>
<p>dangling rotation · 10</p>
<p>dangling? (in my block) · 78</p>
<p>dark candy apple red · 141</p>
<p>data hiding · 73</p>
<p>data structure · 47</p>
<p>data table · 88</p>
<p>data type · 19, 59</p>
<p>database library · 34</p>
<p>date · 92</p>
<p>Dave, Achal · 4</p>
<p>deal block · 150</p>
<p>debugging · 118</p>
<p>Debugging · 17</p>
<p>deep copy of a list · 50</p>
<p>default value · 63</p>
<p>define block · 102</p>
<p>define of recursive procedure · 104</p>
<p><em>definition (of block)</em> · 102</p>
<p>definition of block · 101</p>
<p>delegation · 87</p>
<p>Delete a variable · 14</p>
<p>delete block definition… option · 120</p>
<p>delete option · 124, 128, 133</p>
<p>delete var block · 32</p>
<p>denim · 139</p>
<p>design principle · 46, 77</p>
<p>devices · 91, 92</p>
<p>dialog, input name · 42</p>
<p>dimensions of block · 57</p>
<p>Dinsmore, Nathan · 4</p>
<p>direction to block · 22</p>
<p>Disable click-to-run option · 117</p>
<p>dispatch procedure · 85, 86, 88</p>
<p>distance to block · 22</p>
<p>dl (startup option) · 136</p>
<p>do in parallel block · 31</p>
<p>does var exist block · 32</p>
<p>down arrow (keyboard editor) · 131</p>
<p>Download source option · 108</p>
<p>drag from prototype · 43</p>
<p>draggable checkbox · 122, 132</p>
<p>dragging onto the arrowheads · 69</p>
<p>drop block · 155</p>
<p>duplicate block definition… option · 120</p>
<p>duplicate option · 124, 128, 132</p>
<p>dynamic array · 49</p>
<p>E</p>
<p>easing block · 33</p>
<p>easing function · 33</p>
<p>edge color · 129</p>
<p>edit option · 128, 133, 135</p>
<p>edit… option · 120</p>
<p>editMode (startup option) · 137</p>
<p>effect block · 19</p>
<p>ellipse tool · 128, 129</p>
<p>ellipsis · 63</p>
<p>else block · 28</p>
<p>else if block · 28</p>
<p>empty input slots, filling · 66, 68, 70</p>
<p>enter key (keyboard editor) · 131</p>
<p>equality of complete structures · 149</p>
<p>eraser tool · 128</p>
<p>error block · 31</p>
<p>error catching library · 31</p>
<p>escape key (keyboard editor) · 130</p>
<p>Examples button · 108</p>
<p>Execute on slider change option · 115</p>
<p>export block definition… option · 120</p>
<p>Export blocks… option · 110</p>
<p>export option · 128, 133</p>
<p>Export project… option · 110</p>
<p>export… option · 134, 136</p>
<p>expression · 11</p>
<p>Extension blocks option · 115</p>
<p>extract option · 124</p>
<p>eyedropper tool · 128, 129</p>
<p>F</p>
<p>factorial · 44, 71</p>
<p>factorial · 32</p>
<p>Fade blocks… option · 114</p>
<p>fair HSL · 145</p>
<p>fair hue · 29, 141, 143, 146</p>
<p>fair hue table · 146</p>
<p>fair saturation · 146</p>
<p>fair value · 146</p>
<p>Falkoff, Adin · 148</p>
<p>false block · 19</p>
<p>file icon menu · 108</p>
<p>fill color · 129</p>
<p>Finch · 92</p>
<p>find blocks… option · 120</p>
<p>find first · 50</p>
<p>first class data · 148</p>
<p>first class data type · 46</p>
<p>ﬁrst class procedures · 65</p>
<p>ﬁrst class sprites · 73</p>
<p>first word block · 27</p>
<p>flag, green · 6</p>
<p>Flat design option · 116</p>
<p>flat line ends option · 117</p>
<p>flatten block · 152</p>
<p>flatten of block · 57</p>
<p>floodfill tool, · 128</p>
<p>focus (keyboard editor) · 131</p>
<p>footprint button · 117</p>
<p>for block · 13, 19, 26, 64, 65</p>
<p>for each block · 20</p>
<p>for each item block · 25</p>
<p>For this sprite only · 15</p>
<p>formal parameters · 69</p>
<p>frequency distribution analysis library · 34</p>
<p>from color block · 29, 140, 142</p>
<p>function, associative · 51</p>
<p>function, higher order · 49, 148</p>
<p>function, mixed · 148, 151</p>
<p>function, scalar · 55, 148</p>
<p>functional programming style · 48</p>
<p>G</p>
<p>generic hat block · 6</p>
<p>generic when · 6</p>
<p>get blocks option · 128</p>
<p>getter · 76</p>
<p>getter/setter library · 32</p>
<p>glide block · 115</p>
<p>global variable · 14, 15</p>
<p>go to block · 22</p>
<p>grade down block · 154</p>
<p>grade up block · 154</p>
<p>graphics effect · 19</p>
<p>gray · 139, 141</p>
<p>green flag · 6</p>
<p>green flag button · 118</p>
<p>green halo · 123</p>
<p>Guillén i Pelegay, Joan · 4</p>
<p>H</p>
<p>halo · 11, 123; red · 69</p>
<p>hat block · 6, 41; generic · 6</p>
<p>help… option · 119, 123</p>
<p>help… option for custom block · 119</p>
<p>hexagonal blocks · 41, 60</p>
<p>hexagonal shape · 12</p>
<p>hide and show primitives · 17</p>
<p>hide blocks option · 120</p>
<p>Hide blocks… option · 111</p>
<p>hide var block · 32</p>
<p>hide variable block · 17</p>
<p>hideControls (startup option) · 137</p>
<p>higher order function · 49, 70, 148, 157</p>
<p>higher order procedure · 66</p>
<p>histogram · 34</p>
<p>Hotchkiss. Kyle · 4</p>
<p>HSL · 138, 143</p>
<p>HSL color · 29</p>
<p>HSL pen color model option · 117</p>
<p>HSV · 138, 142</p>
<p>HTML (HyperText Markup Language) · 91</p>
<p>HTTP · 92</p>
<p>HTTPS · 92, 126</p>
<p>Hudson, Connor · 4</p>
<p>hue · 141</p>
<p>Huegle, Jadga · 4</p>
<p>Hummingbird · 92</p>
<p>hyperblocks · 148</p>
<p>Hyperblocks · 55</p>
<p>Hz for block · 34</p>
<p>I</p>
<p>IBM System/360 · 148</p>
<p>ice cream · 109</p>
<p>icons in title text · 64</p>
<p>id block · 71</p>
<p>id option · 22</p>
<p>identical to · 20</p>
<p>identity function · 71</p>
<p>if block · 12</p>
<p>if do and pause all block · 26</p>
<p>if else block · 71</p>
<p>if else reporter block · 19</p>
<p>ignore block · 26</p>
<p>imperative programming style · 48</p>
<p>import… option · 134</p>
<p>Import… option · 110</p>
<p>in front of block · 49</p>
<p>in front of stream block · 26</p>
<p>index of block (APL) · 152</p>
<p>index variable · 19</p>
<p>indigo · 141</p>
<p>infinite precision integer library · 32</p>
<p>Ingalls, Dan · 4</p>
<p>inherit block · 77</p>
<p>inheritance · 73, 87</p>
<p>inner product block · 158</p>
<p>input · 6</p>
<p>input list · 68, 69</p>
<p>input name · 69</p>
<p>input name dialog · 42, 59</p>
<p>Input sliders option · 115</p>
<p>input-type shapes · 59</p>
<p>instance · 85</p>
<p>integers block · 152</p>
<p>interaction · 15</p>
<p>internal variable · 63</p>
<p>iota block · 152</p>
<p>is _ a _ ? block · 19</p>
<p>is flag block · 20</p>
<p>is identical to · 20</p>
<p>item 1 of block · 49</p>
<p>item 1 of stream block · 26</p>
<p>item block · 148</p>
<p>item of block · 56</p>
<p>iteration library · 26</p>
<p>Iverson, Kenneth E. · 4, 148</p>
<p>J</p>
<p>jaggies · 79</p>
<p>Java programming language · 68</p>
<p>JavaScript · 19, 143</p>
<p>JavaScript extensions option · 115</p>
<p>JavaScript function block · 115</p>
<p>jigsaw-piece blocks · 40, 60</p>
<p>join block · 102</p>
<p>JSON (JavaScript Object Notation) file · 54</p>
<p>JSON format · 20</p>
<p>json of block · 57</p>
<p>jukebox · 9</p>
<p>K</p>
<p>Kay, Alan · 4</p>
<p>key:value: block · 34</p>
<p>keyboard editing button · 123</p>
<p>keyboard editor · 130</p>
<p>keyboard shortcuts · 108</p>
<p>key-value pair · 88</p>
<p>L</p>
<p>L*a*b* · 143</p>
<p>L*u*v* · 143</p>
<p>label, block · 102</p>
<p>lambda · 67</p>
<p>lang= (startup option) · 137</p>
<p>Language… option · 114</p>
<p>large option · 134</p>
<p>last blocks · 27</p>
<p>layout, window · 5</p>
<p>Leap Motion · 92</p>
<p>left arrow (keyboard editor) · 131</p>
<p>Lego NXT · 92</p>
<p>length block · 148</p>
<p>length of block · 57</p>
<p>length of text block · 22</p>
<p>letter (1) of (world) block · 27</p>
<p>lexical scope · 85</p>
<p>lg option · 22</p>
<p>Libraries… option · 25, 111</p>
<p>library: block · 45</p>
<p>license · 107</p>
<p>Lieberman, Henry · 77</p>
<p>Lifelong Kindergarten Group · 4</p>
<p>lightness · 143</p>
<p>lightness option · 117</p>
<p>lightning bolt symbol · 25, 123</p>
<p>line break in block · 64</p>
<p>line drawing tool · 128</p>
<p>lines of block · 57</p>
<p>linked list · 49</p>
<p>Lisp · 58</p>
<p>list ➔ sentence block · 27</p>
<p>list ➔ word block · 27</p>
<p>list block · 46</p>
<p>list comprehension library · 35</p>
<p>list copy · 50</p>
<p>list library · 25</p>
<p>list of procedures · 70</p>
<p>List type · 60</p>
<p>list view · 51</p>
<p>list, linked · 49</p>
<p>list, multi-dimensional · 55</p>
<p>listify block · 34</p>
<p>lists of lists · 47</p>
<p>little people · 44, 96</p>
<p>loading saved projects · 38</p>
<p>local state · 73</p>
<p>local variables · 19</p>
<p>location-pin · 15</p>
<p>Login… option · 113</p>
<p>Logo tradition · 27</p>
<p>Logout option · 113</p>
<p>Long form input dialog option · 116</p>
<p>long input name dialog · 59</p>
<p>M</p>
<p>macros · 105</p>
<p>magenta · 141, 142</p>
<p>Make a block · 40</p>
<p>Make a block button · 119</p>
<p>make a block… option · 126</p>
<p>Make a list · 46</p>
<p>Make a variable · 14</p>
<p>make internal variable visible · 63</p>
<p>Maloney, John · 4</p>
<p>map block · 50, 65</p>
<p>map library · 35</p>
<p>map over stream block · 26</p>
<p>map to code block · 117</p>
<p>map-pin symbol · 75</p>
<p>maroon · 141</p>
<p>Massachusetts Institute of Technology · 4</p>
<p>mathematicians · 148</p>
<p>matrices · 148</p>
<p>matrix multiplication · 158</p>
<p>max block · 20</p>
<p>McCarthy, John · 4</p>
<p>media computation · 55, 149</p>
<p>Media Lab · 4</p>
<p>memory · 16</p>
<p>menus library · 36</p>
<p>message · 73</p>
<p>message passing · 73, 86</p>
<p>method · 73, 75, 86</p>
<p>methods table · 88</p>
<p>microphone · 82</p>
<p>microphone block · 82</p>
<p>middle option · 127</p>
<p>min block · 20</p>
<p>mirror sites · 137</p>
<p>MIT Artificial Intelligence Lab · 4</p>
<p>MIT Media Lab · 4</p>
<p>mix block · 140</p>
<p>mix colors block · 29</p>
<p>mixed function · 148, 151</p>
<p>mixing paints · 144</p>
<p>Modrow, Eckart · 121</p>
<p>monadic negation operator · 22</p>
<p>Morphic · 4</p>
<p>Motyashov, Ivan · 4</p>
<p>mouse position block · 21</p>
<p>move option · 133</p>
<p>MQTT library · 36</p>
<p>multiline block · 33</p>
<p>multimap block · 25</p>
<p>multiple input · 63</p>
<p>multiple-branch conditional library · 28</p>
<p>multiplication table · 158</p>
<p>multiplication, matrix · 158</p>
<p>mutation · 48</p>
<p>mutators · 47</p>
<p>my block · 73, 76</p>
<p>my blocks block · 102</p>
<p>my categories block · 102</p>
<p>N</p>
<p>name (in my block) · 78</p>
<p>name box · 122</p>
<p>name, input · 69</p>
<p>nearest color number · 142</p>
<p>neg option · 22</p>
<p>negation operator · 22</p>
<p>neighbors (in my block) · 78</p>
<p>nested calls · 70</p>
<p>Nesting Sprites · 10</p>
<p>New category… option · 111</p>
<p>new costume block · 80</p>
<p>new line character · 64</p>
<p>New option · 108</p>
<p>New scene option · 111</p>
<p>new sound block · 84</p>
<p>new sprite button · 8</p>
<p>newline character · 20</p>
<p>Nintendo · 92</p>
<p>noExitWarning (startup option) · 137</p>
<p>nonlocal exit · 99</p>
<p>normal option · 134</p>
<p>normal people · 145</p>
<p>noRun (startup option) · 137</p>
<p>Number type · 60</p>
<p>numbers from block · 20</p>
<p>O</p>
<p>object block · 73</p>
<p>Object Logo · 77</p>
<p>object oriented programming · 73, 85</p>
<p>Object type · 60</p>
<p>objects, building explicitly · 85</p>
<p>of block (operators) · 22</p>
<p>of block (sensing) · 24, 106</p>
<p>of costume block · 79</p>
<p>open (startup option) · 136</p>
<p>Open in Community Site option · 113</p>
<p>Open… option · 108</p>
<p>operator (APL) · 148, 157</p>
<p>orange oval · 13</p>
<p>other clones (in my block) · 78</p>
<p>other sprites (in my block) · 78</p>
<p>outer product block · 158</p>
<p>outlined ellipse tool · 128</p>
<p>outlined rectangle tool · 128</p>
<p>oval blocks · 40, 60</p>
<p>P</p>
<p>paint brush icon · 126</p>
<p>Paint Editor · 126</p>
<p>Paint Editor window · 128</p>
<p>paintbrush tool · 128</p>
<p>paints · 144</p>
<p>Paleolithic · 150</p>
<p>palette · 6</p>
<p>palette area · 119</p>
<p>palette background · 120</p>
<p>Parallax S2 · 92</p>
<p>parallelism · 8, 48</p>
<p>parallelization library · 31</p>
<p>parent (in my block) · 78</p>
<p>parent attribute · 77</p>
<p>parent class · 87</p>
<p>parent… option · 136</p>
<p><em>Parsons problems</em> · 117</p>
<p>parts (in my block) · 78</p>
<p>parts (of nested sprite) · 10</p>
<p>pause all block · 17, 118</p>
<p>pause button · 17, 118</p>
<p>pen block · 24, 29, 117, 140</p>
<p>pen down? block · 19</p>
<p>pen trails block · 18</p>
<p>pen trails option · 135</p>
<p>pen vectors block · 18</p>
<p>permanent clone · 74, 136</p>
<p>physical devices · 91</p>
<p>pic… option · 135, 136</p>
<p>picture of script · 124</p>
<p>picture with speech balloon · 124</p>
<p>picture, smart · 124</p>
<p>pink · 141</p>
<p>pivot option · 133</p>
<p>pixel · 79</p>
<p>pixel, screen · 19</p>
<p>pixels library · 27</p>
<p>Plain prototype labels option · 116</p>
<p>play block · 34</p>
<p>play sound block · 9</p>
<p>playing sounds · 9</p>
<p>plot bar chart block · 28</p>
<p>plot sound block · 34</p>
<p>point towards block · 22</p>
<p>points as inputs · 22</p>
<p>polymorphism · 75</p>
<p>position block · 21, 33</p>
<p>Predicate block · 12</p>
<p>preloading a project · 136</p>
<p>present (startup option) · 136</p>
<p>presentation mode button · 118</p>
<p>primitive block within a script · 123</p>
<p>printable block · 27, 158</p>
<p>procedure · 12, 66</p>
<p>Procedure type · 72</p>
<p>procedures as data · 9</p>
<p>product block · 22, 28</p>
<p>project control buttons · 118</p>
<p>Project notes option · 108</p>
<p>Prolog · 58</p>
<p>prototype · 41</p>
<p>prototyping · 76, 88</p>
<p>pulldown input · 61</p>
<p>pumpkin · 139</p>
<p>purple · 142</p>
<p>R</p>
<p>rainbow · 141</p>
<p>rank · 148</p>
<p>rank of block · 57, 151</p>
<p>ravel block · 149</p>
<p>raw data… option · 134</p>
<p>ray length block · 22</p>
<p>read-only pulldown input · 61</p>
<p>receivers… option · 125</p>
<p>recover button · 39</p>
<p>rectangle tool · 128</p>
<p>recursion · 43</p>
<p>recursive call · 68</p>
<p>recursive operator · 71</p>
<p>recursive procedure using define · 104</p>
<p>red halo · 68, 69, 123</p>
<p>redo button · 123</p>
<p>redrop option · 125</p>
<p>reduce block · 156, 157</p>
<p>Reference manual option · 108</p>
<p>reflectance graph · 144</p>
<p>relabel option · 20</p>
<p>relabel… option · 123, 124</p>
<p>release option · 136</p>
<p>Remove a category… option · 111</p>
<p>remove duplicates from block · 25</p>
<p>rename option · 128</p>
<p>renaming variables · 15</p>
<p><strong>repeat</strong> block · 7, 67</p>
<p>repeat blocks · 26</p>
<p>repeat until block · 12</p>
<p>report block · 44</p>
<p>Reporter block · 10</p>
<p>reporter <strong>if</strong> block · 12</p>
<p>reporter if else block · 19</p>
<p>reporters, recursive · 44</p>
<p>Reset Password… option · 113</p>
<p>reshape block · 56, 148, 151</p>
<p>Restore unsaved project option · 39</p>
<p>result pic… option · 124, 125</p>
<p>reverse block · 156</p>
<p>reverse columns block · 156</p>
<p>Reynolds, Ian · 4</p>
<p>RGB · 138</p>
<p>RGBA option · 19</p>
<p>right arrow (keyboard editor) · 131</p>
<p>ring, gray · 49, 66, 68</p>
<p>ringify · 66</p>
<p>ringify option · 124</p>
<p>Roberts, Eric · 44</p>
<p>robots · 91, 92</p>
<p>rods and cones · 141</p>
<p>roll block · 150</p>
<p>Romagosa, Bernat · 4</p>
<p>rotation buttons · 122</p>
<p>rotation point tool · 128, 129</p>
<p>rotation x (in my block) · 78</p>
<p>rotation y (in my block) · 78</p>
<p>run (startup option) · 136</p>
<p>run block · 65, 68</p>
<p>run w/continuation · 99</p>
<p>S</p>
<p>safely try block · 31</p>
<p>sample · 82</p>
<p>saturation · 143</p>
<p>Save as… option · 110</p>
<p>Save option · 110</p>
<p>save your project in the cloud · 37</p>
<p>scalar = block · 150</p>
<p>scalar function · 55, 148, 150</p>
<p>scalar join block · 150</p>
<p>scenes · 111, 136</p>
<p>Scenes… option · 111</p>
<p>Scheme · 4</p>
<p>Scheme number block · 32</p>
<p>SciSnap<em>!</em> · 121</p>
<p>SciSnap<em>!</em> library · 36</p>
<p>scope: lexical · 85</p>
<p>Scratch · 5, 9, 40, 46, 47, 48, 59</p>
<p>Scratch Team · 4</p>
<p>screen pixel · 19</p>
<p>script · 5</p>
<p>script pic · 43</p>
<p>script pic… option · 124</p>
<p><strong>script variables</strong> block · 15, 19, 86</p>
<p>scripting area · 6, 122</p>
<p>scripting area background context menu · 125</p>
<p>scripts pic… option · 126</p>
<p>search bar · 109</p>
<p>search button · 119</p>
<p>secrets · 107</p>
<p>select block · 156</p>
<p>selectors · 47</p>
<p>self (in my block) · 78</p>
<p>senders… option · 125</p>
<p>sensors · 91</p>
<p>sentence ➔ list block · 27</p>
<p>sentence block · 25</p>
<p>sentence library · 27</p>
<p>sentence➔list block · 25</p>
<p>separator: menu · 62</p>
<p>sepia · 139</p>
<p>serial-ports library · 33</p>
<p>Servilla, Deborah · 4</p>
<p>set _ of block _ to _ block · 102</p>
<p>set background block · 22</p>
<p><strong>set</strong> block · 15</p>
<p>set flag block · 20, 32</p>
<p>set pen block · 24, 29, 117, 139, 140</p>
<p>set pen to crayon block · 30, 139</p>
<p>set value block · 32</p>
<p>set var block · 32</p>
<p>setter · 76</p>
<p>setting block · 32</p>
<p>settings icon · 114</p>
<p>shade · 141</p>
<p>shallow copy of a list · 50</p>
<p>shape of block · 151</p>
<p>shapes of blocks · 40</p>
<p>shift-arrow keys (keyboard editor) · 131</p>
<p>Shift-click (keyboard editor) · 130</p>
<p>shift-click on block · 124</p>
<p>shift-clicking · 107</p>
<p>shift-enter (keyboard editor) · 130</p>
<p>Shift-tab (keyboard editor) · 130</p>
<p>shortcut · 126, 135</p>
<p>shortcuts: keyboard · 108</p>
<p>show all option · 135</p>
<p>Show buttons option · 117</p>
<p>Show categories option · 117</p>
<p>show option · 136</p>
<p>show primitives option · 121</p>
<p>show stream block · 26</p>
<p>show var block · 32</p>
<p>show variable block · 17</p>
<p>shown? block · 19</p>
<p>shrink/grow button · 118</p>
<p>sieve block · 26</p>
<p>sign option · 22</p>
<p>Signada library · 36</p>
<p>signum block · 150</p>
<p>Signup… option · 113</p>
<p>simulation · 73</p>
<p>sine wave · 83</p>
<p>Single palette option · 117</p>
<p>single stepping · 18</p>
<p>slider: stepping speed · 18</p>
<p>slider max… option · 134</p>
<p>slider min… option · 134</p>
<p>slider option · 134</p>
<p>Smalltalk · 58</p>
<p>smart picture · 124</p>
<p>snap block · 27</p>
<p>snap option · 22</p>
<p>Snap<em>!</em> logo menu · 107</p>
<p>Snap<em>!</em> manual · 124</p>
<p>Snap<em>!</em> program · 5</p>
<p>Snap! website option · 108</p>
<p>snap.berkeley.edu · 108</p>
<p>solid ellipse tool · 128</p>
<p>solid rectangle tool · 128</p>
<p>sophistication · 72</p>
<p>sort block · 25</p>
<p>sound · 82</p>
<p>sound manipulation library · 34</p>
<p>sounds (in my block) · 78</p>
<p>sounds, first class · 79</p>
<p>Sounds… option · 113</p>
<p>source files for Snap<em>!</em> · 108</p>
<p>space key (keyboard editor) · 131</p>
<p>speak block · 31</p>
<p>special form · 72</p>
<p>spectral colors · 141</p>
<p>speech balloon · 124</p>
<p>speech synthesis library · 31</p>
<p>split block · 20, 91</p>
<p>split by blocks block · 101</p>
<p>split by line block · 57</p>
<p>spreadsheet · 149</p>
<p>sprite · 6, 73</p>
<p>sprite appearance and behavior controls · 122</p>
<p>sprite corral · 8, 135</p>
<p>sprite creation buttons · 135</p>
<p>sprite nesting · 10</p>
<p>sprite-local block · 75</p>
<p>sprite-local variable · 14, 15</p>
<p>square stop sign · 6</p>
<p>squiral · 13</p>
<p>stack of blocks · 6</p>
<p>stage · 6, 73</p>
<p>stage (in my block) · 78</p>
<p>stage blocks · 19</p>
<p>Stage resizing buttons · 118</p>
<p>Stage size… option · 114</p>
<p>Stanford Artificial Intelligence Lab · 4</p>
<p>starting Snap<em>!</em> · 136</p>
<p>Steele, Guy · 4</p>
<p>stop all block · 118</p>
<p>stop block · 22</p>
<p>stop block block · 44</p>
<p>stop button · 118</p>
<p>stop script block · 44</p>
<p>stop sign · 8</p>
<p>stop sign, square · 6</p>
<p>Stream block · 26</p>
<p>stream library · 26</p>
<p>Stream with numbers from block · 26</p>
<p>stretch block · 80</p>
<p>string processing library · 33</p>
<p><em>Structure and Interpretation of Computer Programs</em> · 4</p>
<p>submenu · 62</p>
<p>substring block · 33</p>
<p>subtractive mixing · 144</p>
<p>sum block · 22, 28</p>
<p>Super-Awesome Sylvia · 92</p>
<p>Sussman, Gerald J. · 4</p>
<p>Sussman, Julie · 4</p>
<p>svg… option · 135</p>
<p>switch in C · 28</p>
<p>symbols in title text · 64</p>
<p>synchronous rotation · 10</p>
<p>system getter/setter library · 32</p>
<p>T</p>
<p>tab character · 20</p>
<p>tab key (keyboard editor) · 130</p>
<p>table · 158</p>
<p>table view · 51</p>
<p>take block · 155</p>
<p>teal · 142</p>
<p>temporary clone · 74, 133</p>
<p>Terms of Service · 38</p>
<p>termwise extension · 148</p>
<p>text costume library · 31</p>
<p>text input · 9</p>
<p>Text type · 60</p>
<p>text-based language · 117</p>
<p>text-to-speech library · 31</p>
<p><em>Thinking Recursively</em> · 44</p>
<p>thread · 100</p>
<p>thread block · 100</p>
<p>Thread safe scripts option · 116</p>
<p>throw block · 26</p>
<p>thumbnail · 122</p>
<p>time · 92</p>
<p>tint · 141</p>
<p>tip option · 127</p>
<p>title text · 42</p>
<p>to block · 22</p>
<p>tool bar · 6</p>
<p>tool bar features · 107</p>
<p>touching block · 22</p>
<p>transient variable · 16</p>
<p>translation · 114</p>
<p>translations option · 43</p>
<p>transparency · 30, 79, 140</p>
<p>transparent paint · 129</p>
<p>transpose block · 156</p>
<p>true block · 19</p>
<p>TuneScope library · 36</p>
<p>Turbo mode option · 115</p>
<p>turtle costume · 126</p>
<p>Turtle costume · 9</p>
<p>turtle’s rotation point · 127</p>
<p>two-item (x,y) lists · 22</p>
<p>type · 19</p>
<p>U</p>
<p>Undefined! blocks · 120</p>
<p>Undelete sprites… option · 113</p>
<p>undo button · 123, 129</p>
<p>undrop option · 125</p>
<p>unevaluated procedure types · 61</p>
<p>unevaluated type · 72</p>
<p>Unicode · 149</p>
<p>Uniform Resource Locator · 91</p>
<p>unringify · 66, 86</p>
<p>unringify option · 124</p>
<p>Unused blocks… option · 111</p>
<p>up arrow (keyboard editor) · 131</p>
<p>upvar · 64</p>
<p>upward-pointing arrow · 63</p>
<p>url block · 34, 91</p>
<p>USE BIGNUMS block · 32</p>
<p>use case-independent comparisons block · 33</p>
<p>user interface elements · 107</p>
<p>user name · 37</p>
<p>V</p>
<p>value · 143</p>
<p>value at key block · 34</p>
<p>var block · 32</p>
<p>variable · 13, 76; block · 43; global · 14; renaming · 15; script-local · 15; sprite-local · 14, 15; transient · 16</p>
<p>variable watcher · 14</p>
<p>variable-input slot · 68</p>
<p>variables in ring slots · 66</p>
<p>variables library · 32</p>
<p>variables, local · 19</p>
<p>variadic · 22</p>
<p>variadic input · 46, 63</p>
<p>variadic library · 28</p>
<p>vector · 112</p>
<p>vector editor · 129</p>
<p>vectors · 148</p>
<p>video block · 22</p>
<p>video on block · 80</p>
<p>violet · 142</p>
<p>visible stepping · 45, 117</p>
<p>visible stepping button · 18</p>
<p>visible stepping option · 115</p>
<p>visual representation of a sentence · 27</p>
<p>W</p>
<p>wardrobe · 9</p>
<p>warp block · 19, 123</p>
<p>watcher · 15</p>
<p>Water Color Bot · 92</p>
<p>web services library · 34</p>
<p>when I am block · 23</p>
<p>when I am stopped script · 23</p>
<p>when I receive block · 23</p>
<p>when, generic · 6</p>
<p>white · 142</p>
<p>white background · 141</p>
<p>whitespace · 20</p>
<p>Wiimote · 92</p>
<p>window layout · 5</p>
<p>with inputs · 66</p>
<p>word ➔ list block · 27</p>
<p>word and sentence library · 27</p>
<p>world map library · 35</p>
<p>World Wide Web · 91</p>
<p>write block · 18</p>
<p>writeable pulldown inputs · 61</p>
<p>X</p>
<p>X position · 11</p>
<p>X11/W3C color names · 29</p>
<p>Xerox PARC · 4</p>
<p>Y</p>
<p>Y position · 11</p>
<p>yield block · 100</p>
<p>Yuan, Yuan · 4</p>
<p>Z</p>
<p>zebra coloring · 11</p>
<p>Zoom blocks… option · 114</p>
<p>[1] One of the hat blocks, the generic <span></span> “when anything” block , is subtly different from the others. When the stop sign is clicked, or when a project or sprite is loaded, this block doesn’t test whether the condition in its hexagonal input slot is true, so the script beneath it will not run, until some <em>other</em> script in the project runs (because, for example, you click the green flag). When generic when <span></span> blocks are disabled, the stop sign <span></span> will be square <span></span> instead of octagonal.</p>
<p>[2] The hide variable and <span></span> show variable block <span></span> s can also be used to hide and show primitives <span></span> in the palette. The pulldown menu doesn’t include primitive blocks, but there’s a generally useful technique to give a block input values it wasn’t expecting using run or call:<img src="assets/image120.png" class="img-fluid" alt="image120.png"> <!--  style="width:3.9375in;height:0.38889in" / --></p>
<p>In order to use a block as an input this way, you must explicitly put a ring around it, by right-clicking on it and choosing ringify. More about rings in Chapter VI.</p>
<p>[3] This use of the word “prototype” is unrelated to the <em>prototyping object oriented programming</em> discussed later.</p>
<p>[4] Note to users of earlier versions: From the beginning, there has been a tension in our work between the desire to provide tools such as for (used in this example) and the higher order functions introduced on the next page as primitives, to be used as easily as other primitives, and the desire to show how readily such tools can be implemented in Snap<em>!</em> itself. This is one instance of our general pedagogic understanding that learners should both use abstractions and be permitted to see beneath the abstraction barrier. Until version 5.0, we used the uneasy compromise of a library of tools written in Snap<em>!</em> and easily, but not easily enough, loaded into a project. By <em>not</em> loading the tools, users or teachers could explore how to program them. In 5.0 we made them true primitives, partly because that’s what some of us wanted all along and partly because of the increasing importance of fast performance as we explore “big data” and media computation. But this is not the end of the story for us. In a later version, after we get the design firmed up, we intend to introduce “hybrid” primitives, implemented in high speed Javascript but with an “Edit” option that will open, not the primitive implementation, but the version written in Snap<em>!</em>. The trick is to ensure that this can be done without dramatically slowing users’ projects.</p>
<p>[5] In Scratch, every block that takes a Text-type input has a default value that makes the rectangles for text wider than tall. The blocks that aren’t specifically about text either are of Number type <span></span> or have no default value, so those rectangles are taller than wide. At ﬁrst some of us (bh) thought that Text was a separate type that always had a wide input slot; it turns out that this isn’t true in Scratch (delete the default text and the rectangle narrows), but we thought it a good idea anyway, so we allow Text-shaped boxes even for empty input slots. (This is why Text comes just above Any in the input type selection box.)</p>
<p>[6] There is a primitive id function in the menu of the sqrt of block, but we think seeing its (very simple) implementation will make this example easier to understand.</p>
<p>[7] Some languages popular in the “real world” today, such as JavaScript, claim to use prototyping, but their object system is much more complicated than what we are describing (we’re guessing it’s because they were designed by people too familiar with class/instance programming); that has, in some circles, given prototyping a bad name. Our prototyping design comes from Object Logo <span></span>, and before that, from Henry Lieberman <span></span>. [Lieberman, H., Using Prototypical Objects to Implement Shared Behavior in Object-Oriented Systems, First Conference on Object-Oriented Programming Languages, Systems, and Applications [OOPSLA-86], ACM SigCHI, Portland, OR, September, 1986. Also in <em>Object-Oriented Computing,</em> Gerald Peterson, Ed., IEEE Computer Society Press, 1987.]</p>
<p>[8] <em>Neighbors</em> are all other sprites whose bounding boxes intersect the doubled dimensions of the requesting sprite’s bounds.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/13-appendix-a-snap-color-library/index.html" class="pagination-link" aria-label="Appendix A. Snap*!* color library">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Appendix A. Snap<em>!</em> color library</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../examples.html" class="pagination-link" aria-label="Example Test Title">
        <span class="nav-page-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Example Test Title</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/snap-cloud/snap-manual/edit/main/content/14-appendix-b-apl-features/index.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>